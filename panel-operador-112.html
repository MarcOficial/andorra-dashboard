<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel Operador 112 - Spanish City RP</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<style>
/* Estilos básicos para mini CAD */
body { font-size: 0.9rem; }
.card { margin-bottom: 1rem; }
.panel-izquierda { width: 48%; float: left; }
.panel-derecha { width: 50%; float: right; }
#registrosPanel { position: fixed; bottom: 0; left: 0; width: 300px; height: 100%; background: #f8f9fa; border-left: 1px solid #ccc; display: none; overflow-y: auto; padding: 1rem; z-index: 999; }
.menu-contextual { position: absolute; z-index: 1000; display: none; background: #fff; border: 1px solid #ccc; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
.menu-contextual li { padding: 5px 10px; cursor: pointer; }
.menu-contextual li:hover { background-color: #f0f0f0; }
</style>
</head>
<body>

<header>
<nav class="navbar navbar-expand-lg shadow p-3">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold fs-4" href="dashboard.html">⛰️ Spanish City RP</a>
  </div>
</nav>
</header>

<div class="container-fluid my-3">
  <div class="row">
    <!-- Panel Izquierdo -->
    <div class="panel-izquierda">
      <h5>UNIDADES ACTIVAS</h5>
      <ul id="listaUnidades" class="list-group mb-2"></ul>

      <h5>GRUPOS DE UNIDADES</h5>
      <ul id="gruposUnidades" class="list-group mb-2">
        <li class="list-group-item">Sin datos</li>
      </ul>

      <h5>LLAMADAS ACTIVAS</h5>
      <ul id="llamadasActivas" class="list-group mb-2">
        <li class="list-group-item">Sin datos</li>
      </ul>

      <button id="btnRegistros" class="btn btn-secondary mt-2">Registros</button>
    </div>

    <!-- Panel Derecho -->
    <div class="panel-derecha">
      <h5>Nuevo Operador / Crear Emergencia</h5>
      <form id="formNuevaEmergencia">
        <div class="mb-2">
          <label>Agencia</label>
          <select id="agencia" class="form-select">
            <option value="">Seleccionar</option>
            <option value="Policia">Policía</option>
            <option value="Bomberos">Bomberos</option>
            <option value="SAMU">SAMU</option>
            <option value="UME">UME</option>
          </select>
        </div>
        <div class="mb-2">
          <label>Departamento</label>
          <select id="departamento" class="form-select"></select>
        </div>
        <div class="mb-2">
          <label>Subdivisión</label>
          <select id="subdivision" class="form-select"></select>
        </div>
        <div class="mb-2">
          <label>Título de llamada</label>
          <input type="text" id="tituloLlamada" class="form-control">
        </div>
        <div class="mb-2">
          <label>Descripción</label>
          <textarea id="descripcionLlamada" class="form-control"></textarea>
        </div>
        <div class="mb-2">
          <label>Prioridad</label>
          <select id="prioridad" class="form-select">
            <option value="Alta">Alta</option>
            <option value="Media">Media</option>
            <option value="Baja">Baja</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary w-100">Crear Llamada</button>
      </form>

      <h5 class="mt-3">Llamadas activas</h5>
      <ul id="listaLlamadasActivas" class="list-group mb-2"></ul>

      <h5 class="mt-3">Historial de llamadas</h5>
      <ul id="historialLlamadas" class="list-group mb-2"></ul>
    </div>
  </div>
</div>

<!-- Modal NOT SET -->
<div class="modal fade" id="modalUnidad" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modificar Unidad - NOT SET</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <input type="text" id="numeroUnidad" class="form-control mb-2" placeholder="Número de unidad">
        <input type="text" id="nombreUnidad" class="form-control mb-2" placeholder="Nombre">
        <input type="text" id="rangoUnidad" class="form-control mb-2" placeholder="Rango">
        <input type="text" id="estatusUnidad" class="form-control mb-2" placeholder="Estatus">
        <input type="text" id="ubicacionUnidad" class="form-control mb-2" placeholder="Ubicación">
        <select id="agenciaUnidad" class="form-select mb-2">
          <option value="">Agencia</option>
          <option value="Policia">Policía</option>
          <option value="Bomberos">Bomberos</option>
          <option value="SAMU">SAMU</option>
          <option value="UME">UME</option>
        </select>
        <select id="departamentoUnidad" class="form-select mb-2"></select>
        <select id="subdivisionUnidad" class="form-select mb-2"></select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="guardarUnidad">Guardar</button>
      </div>
    </div>
  </div>
</div>

<!-- Panel lateral Registros -->
<div id="registrosPanel">
  <h5>Registros</h5>
  <ul>
    <li>MIS ARCHIVOS</li>
    <li>REPORTES (0)</li>
    <li>REGISTROS (0)</li>
    <li>BUSCAR</li>
    <li>NUEVO INFORME</li>
    <li>NUEVO REGISTRO</li>
    <li>PANEL SUPERVISOR</li>
  </ul>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Datos iniciales
let departamentosData = {
  Policia: ["Guardia Civil","Policía Nacional"],
  Bomberos: ["Valencia Bomberos"],
  SAMU: ["SAMU Valencia"],
  UME: ["UME Valencia"]
};
let subdivisionesData = {
  "Guardia Civil": ["Subdivisión 1","Subdivisión 2"],
  "Policía Nacional": ["Subdivisión A","Subdivisión B"],
  "Valencia Bomberos": ["Subdivisión Fuego"],
  "SAMU Valencia": ["Subdivisión SAMU"],
  "UME Valencia": ["Subdivisión UME"]
};

// Actualizar departamentos según agencia
document.getElementById("agenciaUnidad").addEventListener("change", e=>{
  let depSelect = document.getElementById("departamentoUnidad");
  depSelect.innerHTML = "";
  let deps = departamentosData[e.target.value] || [];
  deps.forEach(d=>{
    let opt = document.createElement("option"); opt.value=d; opt.text=d;
    depSelect.appendChild(opt);
  });
  depSelect.dispatchEvent(new Event("change"));
});

// Actualizar subdivisiones según departamento
document.getElementById("departamentoUnidad").addEventListener("change", e=>{
  let subSelect = document.getElementById("subdivisionUnidad");
  subSelect.innerHTML = "";
  let subs = subdivisionesData[e.target.value] || [];
  subs.forEach(s=>{
    let opt = document.createElement("option"); opt.value=s; opt.text=s;
    subSelect.appendChild(opt);
  });
});

// Guardar unidad modificada
document.getElementById("guardarUnidad").addEventListener("click", ()=>{
  bootstrap.Modal.getInstance(document.getElementById("modalUnidad")).hide();
});

// Mostrar/ocultar panel registros
document.getElementById("btnRegistros").addEventListener("click", ()=>{
  let panel = document.getElementById("registrosPanel");
  panel.style.display = panel.style.display==="none"?"block":"none";
});
</script>
</body>
</html>
