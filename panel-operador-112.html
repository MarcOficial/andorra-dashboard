<!-- Modal NOT SET -->
<div class="modal fade" id="unidadModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modificar identificador: NOT SET</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="unidadForm" class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Número de unidad</label>
            <input type="text" class="form-control" id="numeroUnidad">
          </div>
          <div class="col-md-6">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" id="nombreUnidad">
          </div>
          <div class="col-md-6">
            <label class="form-label">Rango</label>
            <input type="text" class="form-control" id="rangoUnidad">
          </div>
          <div class="col-md-6">
            <label class="form-label">Estatus</label>
            <select class="form-select" id="estatusUnidad">
              <option>DISPONIBLE</option>
              <option>OCUPADO</option>
              <option>FUERA DE SERVICIO</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Ubicación</label>
            <input type="text" class="form-control" id="ubicacionUnidad">
          </div>
          <div class="col-md-6">
            <label class="form-label">AOP</label>
            <input type="text" class="form-control" id="aopUnidad">
          </div>

          <!-- Menús dependientes -->
          <div class="col-md-4">
            <label class="form-label">Agencia</label>
            <select class="form-select" id="agenciaUnidad">
              <option value="">Seleccionar...</option>
              <option value="policia">Policía</option>
              <option value="bomberos">Bomberos</option>
              <option value="samu">SAMU</option>
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label">Departamento</label>
            <select class="form-select" id="departamentoUnidad" disabled>
              <option value="">Seleccionar agencia primero...</option>
            </select>
          </div>

          <div class="col-md-4">
            <label class="form-label">Subdivisión</label>
            <select class="form-select" id="subdivisionUnidad" disabled>
              <option value="">Seleccionar departamento primero...</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary" id="guardarUnidad">Guardar</button>
      </div>
    </div>
  </div>
</div>

<script>
// Datos de dependencias
const opciones = {
  policia: {
    "Guardia Civil": ["Tráfico", "Rural", "Seguridad Ciudadana"],
    "Policía Nacional": ["UIP", "UPR", "Policía Judicial"]
  },
  bomberos: {
    "Bomberos Urbanos": ["Rescate", "Incendios", "Prevención"],
    "Bomberos Forestales": ["Extinción", "Emergencias forestales"]
  },
  samu: {
    "SAMU Básico": ["Ambulancia básica", "Soporte vital básico"],
    "SAMU Avanzado": ["UVI Móvil", "Emergencias críticas"]
  }
};

const agenciaSelect = document.getElementById("agenciaUnidad");
const departamentoSelect = document.getElementById("departamentoUnidad");
const subdivisionSelect = document.getElementById("subdivisionUnidad");

// Cuando cambie la agencia
agenciaSelect.addEventListener("change", () => {
  const agencia = agenciaSelect.value;
  departamentoSelect.innerHTML = "";
  subdivisionSelect.innerHTML = "<option value=''>Seleccionar departamento primero...</option>";
  subdivisionSelect.disabled = true;

  if (agencia && opciones[agencia]) {
    departamentoSelect.disabled = false;
    departamentoSelect.innerHTML = "<option value=''>Seleccionar...</option>";
    Object.keys(opciones[agencia]).forEach(dep => {
      let opt = document.createElement("option");
      opt.value = dep;
      opt.textContent = dep;
      departamentoSelect.appendChild(opt);
    });
  } else {
    departamentoSelect.disabled = true;
    departamentoSelect.innerHTML = "<option value=''>Seleccionar agencia primero...</option>";
  }
});

// Cuando cambie el departamento
departamentoSelect.addEventListener("change", () => {
  const agencia = agenciaSelect.value;
  const depto = departamentoSelect.value;
  subdivisionSelect.innerHTML = "";

  if (agencia && depto && opciones[agencia][depto]) {
    subdivisionSelect.disabled = false;
    subdivisionSelect.innerHTML = "<option value=''>Seleccionar...</option>";
    opciones[agencia][depto].forEach(sub => {
      let opt = document.createElement("option");
      opt.value = sub;
      opt.textContent = sub;
      subdivisionSelect.appendChild(opt);
    });
  } else {
    subdivisionSelect.disabled = true;
    subdivisionSelect.innerHTML = "<option value=''>Seleccionar departamento primero...</option>";
  }
});
</script>
